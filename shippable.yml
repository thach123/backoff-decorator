language: node_js

node_js:
  - 10.15.1

env:
  global:
    # The path for Xunit to output test reports
    - XUNIT_FILE=shippable/testresults/result.xml
    - LC_ALL=C
    # UNITO_NPM_REGISTRY_TOKEN
    - secure: Pp7U5YtgYoYAgO/UFAuZbQb0esquqGpe2UjIxo03qhBLq6AAD96oX3VOPwheEfQpMckTUm7wMEid29A0z6ssHZ1YBrCLDGBFS3zntg/ITQ7XS9SYRsXJuufxTMSeRSyqQ8M13kYkBHZBkrenL9bcfiCnsryEhy4ZYASYKu4JnqHz1mh8ElSLIgwEoLNQIsbpimr3mbMTJKKMQ0tIB7fLctTv/dI34N48ESgYn5SXEqizUstY4p1tBIIWd6QY52zcRNWXiaFpo7PNOf0OEz9Qq9P9/tDOhRY+qYF0u1jU48W62IOKSYOtzz9LULaE5LrkcZseroykZ34g0G3y0MVXTA==
      

branches:
  only:
    - master

build:
  ci:
    - shippable_retry npm ci
    - npm run audit
    - npm run lint
    - npm run test:ci
    - npm run publish-to-npm

integrations:
  notifications:
    - integrationName: email
      type: email
      recipients:
        - dev@unito.io
      on_failure: always
      on_success: never
      on_pull_request: never
      on_start: never
